"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8818],{8818:(k,d,c)=>{c.r(d),c.d(d,{ServicesListModule:()=>C});var u=c(9808),p=c(3075),n=c(8058),v=c(4040),g=c(1456),h=c(8995),o=c(1216),e=c(5e3),f=c(5539),m=c(4726),S=c(5988);function b(i,r){1&i&&e._UZ(0,"div")}function x(i,r){1&i&&(e.TgZ(0,"span"),e._uU(1,"\u0441\u0443\u043c"),e.qZA())}function _(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){const l=e.CHM(t).$implicit,A=e.oxw();return e.KtG(A.selectService(l))}),e.TgZ(1,"div")(2,"div",9),e.YNc(3,b,1,0,"div",10),e.qZA()(),e.TgZ(4,"div")(5,"p",11)(6,"span"),e._uU(7),e.qZA()(),e.TgZ(8,"p",12),e._uU(9,"\u0426\u0435\u043d\u0430: "),e.TgZ(10,"span",13),e._uU(11),e.ALo(12,"numberFormat"),e.YNc(13,x,2,0,"span",10),e.qZA()()()()}if(2&i){const t=r.$implicit;e.ekj("active",t.selected),e.xp6(3),e.Q6J("ngIf",t.selected),e.xp6(4),e.Oqu(t.name),e.xp6(4),e.hij(" ",0==t.price_uzs?"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e(\u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0432 \u0422\u0438\u0440\u0433\u043e)":e.lcZ(12,6,t.price_uzs)," "),e.xp6(2),e.Q6J("ngIf",0!=t.price_uzs)}}function L(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",0==(null==t.selectedServices?null:t.selectedServices.length)||t.loading),e.xp6(1),e.Oqu(e.lcZ(2,2,"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"))}}const Z=[{path:"",component:(()=>{class i{constructor(t,s,a,l){this.authService=t,this.iab=s,this.router=a,this.navCtrl=l,this.loading=!1,this.services=[],this.selectedServices=[],this.alpha_balance=0,this.amount_sum=0,this.formattedData=[]}ngOnInit(){this.loading=!1,this.getServiceList(),this.getAlphaBalance()}getServiceList(){this.authService.getServicesList().subscribe(t=>{t.status&&(this.services=t.data)})}getAlphaBalance(){this.authService.getAlhpaBalance(this.authService.currentUser.id).subscribe(t=>{t.status&&(this.alpha_balance=t.total_balance)})}selectService(t){t.selected=!t.selected,this.selectedServices=this.services.filter(s=>s.selected)}submit(){if(this.authService.currentUser.issubscription)if(this.amount_sum=this.selectedServices.reduce((t,s)=>t+Number(s.price_uzs),0),this.amount_sum>this.alpha_balance){this.loading=!1;let t=btoa("m=65dc59df3c319dec9d8c3953;ac.UserID="+this.authService.currentUser.id+";a="+(+this.amount_sum-+this.alpha_balance)+"00");this.iab.create("https://checkout.paycom.uz/"+t,"_system"),this.amount_sum=0}else this.formattedData=[],this.selectedServices.forEach(s=>{this.formattedData.push({services_id:s.id,price_uzs:s.price_uzs,price_kzs:s.price_kzs,rate:s.rate})}),this.authService.freeService({phone:this.authService.currentUser.phone,user_id:this.authService.currentUser.id,services:this.formattedData}).subscribe(s=>{s.status&&(this.loading=!1,this.authService.alert("\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0430 !",""),this.router.navigate(["/tabs/home"]))},s=>{this.loading=!1,this.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430",s.error.error)});else this.loading=!1,this.authService.alert("\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443 \u0447\u0442\u043e\u0431\u044b \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0443\u0441\u043b\u0443\u0433\u0430\u043c\u0438 \u0422\u0438\u0440\u0433\u043e",""),this.router.navigate(["/addsubscribe"])}back(){this.navCtrl.back()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.$),e.Y36(m.i),e.Y36(o.F0),e.Y36(n.SH))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-services-list"]],decls:14,vars:5,consts:[[1,"wrapper-fluid-header"],[1,"logo-wrap","personal-head"],[1,"top-back",3,"click"],["src","assets/img/arrow-left.svg","alt",""],[1,"wrapper-fluid","ion-padding-tabs"],[1,"body-wrap","form-block"],["class","price-card",3,"active","click",4,"ngFor","ngForOf"],["class","reg-btn","style","background-color: rgba(255, 113, 0, 1); margin-top: 20px;",3,"disabled","click",4,"ngIf"],[1,"price-card",3,"click"],[1,"radio"],[4,"ngIf"],[1,"month-text"],[1,"price-text"],[2,"font-weight","bold"],[1,"reg-btn",2,"background-color","rgba(255, 113, 0, 1)","margin-top","20px",3,"disabled","click"]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header")(1,"div",0)(2,"div",1)(3,"button",2),e.NdJ("click",function(){return s.back()}),e._UZ(4,"img",3),e.qZA(),e.TgZ(5,"h2"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div"),e.qZA()()(),e.TgZ(9,"ion-content")(10,"div",4)(11,"div",5),e.YNc(12,_,14,8,"div",6),e.YNc(13,L,3,4,"button",7),e.qZA()()()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,3,"\u0423\u0441\u043b\u0443\u0433\u0438 Tirgo Service")),e.xp6(6),e.Q6J("ngForOf",s.services),e.xp6(1),e.Q6J("ngIf",s.services))},dependencies:[u.sg,u.O5,n.W2,n.Gu,S.p,h.X$],styles:[".price-card[_ngcontent-%COMP%]{display:flex;align-items:center;border:2px solid #ccc;border-radius:10px;padding:10px;width:100%;gap:20px;margin:5px 0}.radio[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:30px;width:30px;background-color:#ccc;border-radius:50%}.radio[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:15px;height:15px;border-radius:50%;background-color:#ff7100}.price-card.active[_ngcontent-%COMP%]{border:3px solid rgb(255,113,0)}"]}),i})()}];let P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[o.Bz.forChild(Z),o.Bz]}),i})();var T=c(1059);let C=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,p.u5,n.Pc,P,v.l,g.h,h.aw,T.HeaderPageModule]}),i})()}}]);