"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[578],{578:(X,d,c)=>{c.r(d),c.d(d,{LoginPageModule:()=>z});var r=c(9808),l=c(3075),a=c(8058),_=c(1216),g=c(7582),n=c(5e3),m=c(9716),x=c(520),b=c(5539),f=c(7705),h=c(8995);const T=["passInput"];function Z(e,i){1&e&&(n.TgZ(0,"label",19),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.hij("",n.lcZ(2,1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")," "))}function C(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"span",20)(1,"span",21),n._uU(2),n.qZA(),n.TgZ(3,"input",22),n.NdJ("ngModelChange",function(u){n.CHM(t);const s=n.oxw();return n.KtG(s.phone=u)}),n.qZA()()}if(2&e){const t=n.oxw();n.xp6(2),n.AsE("",t.flag," ",t.prefix,""),n.xp6(1),n.s9C("placeholder",t.mask),n.Q6J("mask",t.mask)("ngModel",t.phone)}}function L(e,i){if(1&e&&(n.TgZ(0,"span",28),n._uU(1),n.ALo(2,"translate"),n.ALo(3,"translate"),n.qZA()),2&e){const t=n.oxw(2);n.xp6(1),n.lnq("",n.lcZ(2,3,"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0421\u041c\u0421 \u0447\u0435\u0440\u0435\u0437")," ",t.timer," ",n.lcZ(3,5,"\u0441\u0435\u043a"),".")}}function k(e,i){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"span",23)(2,"label",24),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"input",25,26),n.NdJ("ngModelChange",function(u){n.CHM(t);const s=n.oxw();return n.KtG(s.code=u)}),n.qZA()(),n.YNc(7,L,4,7,"span",27),n.BQk()}if(2&e){const t=n.oxw();n.xp6(3),n.lnq(" ",t.isTelegram?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043d\u0430 \u0432\u0430\u0448 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442":n.lcZ(4,5,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u0441\u043c\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")," ",t.prefix," ",t.phone,""),n.xp6(2),n.Q6J("ngModel",t.code),n.xp6(2),n.Q6J("ngIf",t.timer>0)}}function A(e,i){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"ion-item",29)(2,"ion-checkbox",30),n.NdJ("ngModelChange",function(u){n.CHM(t);const s=n.oxw();return n.KtG(s.policy=u)}),n.qZA(),n.TgZ(3,"ion-label"),n._uU(4),n.ALo(5,"translate"),n.TgZ(6,"a",31),n._uU(7),n.ALo(8,"translate"),n.qZA(),n._uU(9,". "),n.qZA()(),n.TgZ(10,"ion-item",29)(11,"ion-checkbox",30),n.NdJ("ngModelChange",function(u){n.CHM(t);const s=n.oxw();return n.KtG(s.offer=u)}),n.qZA(),n.TgZ(12,"ion-label"),n._uU(13),n.ALo(14,"translate"),n.TgZ(15,"a",32),n._uU(16),n.ALo(17,"translate"),n.qZA(),n._uU(18,". "),n.qZA()(),n.BQk()}if(2&e){const t=n.oxw();n.xp6(2),n.Q6J("ngModel",t.policy),n.xp6(2),n.hij(" ",n.lcZ(5,6,"\u042f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e")," "),n.xp6(3),n.Oqu(n.lcZ(8,8,"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0443 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438")),n.xp6(4),n.Q6J("ngModel",t.offer),n.xp6(2),n.hij(" ",n.lcZ(14,10,"\u042f \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e")," "),n.xp6(3),n.Oqu(n.lcZ(17,12,"\u043f\u0443\u0431\u043b\u0438\u0447\u043d\u0443\u044e \u043e\u0444\u0435\u0440\u0442\u0443"))}}function P(e,i){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0421\u041c\u0421")))}function v(e,i){1&e&&(n.ynx(0),n._UZ(1,"ion-spinner"),n.BQk())}function y(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",33),n.NdJ("click",function(){n.CHM(t);const u=n.oxw();return n.KtG(u.signIn(!1))}),n.YNc(1,P,3,3,"ng-container",10),n.YNc(2,v,2,0,"ng-container",10),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("disabled",t.loading),n.xp6(1),n.Q6J("ngIf",!t.loading),n.xp6(1),n.Q6J("ngIf",t.loading)}}function F(e,i){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u0434 \u0432 Telegram")))}function I(e,i){1&e&&(n.ynx(0),n._UZ(1,"ion-spinner"),n.BQk())}function J(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",function(){n.CHM(t);const u=n.oxw();return n.KtG(u.signIn(!0))}),n.YNc(1,F,3,3,"ng-container",10),n.YNc(2,I,2,0,"ng-container",10),n.qZA()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",!t.loading),n.xp6(1),n.Q6J("ngIf",t.loading)}}function M(e,i){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c")))}function E(e,i){1&e&&(n.ynx(0),n._UZ(1,"ion-spinner"),n.BQk())}function Q(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",function(){n.CHM(t);const u=n.oxw();return n.KtG(u.verifyCode())}),n.YNc(1,M,3,3,"ng-container",10),n.YNc(2,E,2,0,"ng-container",10),n.qZA()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",!t.loading),n.xp6(1),n.Q6J("ngIf",t.loading)}}function N(e,i){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u043e\u0434 \u0432 Telegram")))}function B(e,i){1&e&&(n.ynx(0),n._UZ(1,"ion-spinner"),n.BQk())}function Y(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",35),n.NdJ("click",function(){n.CHM(t);const u=n.oxw();return n.KtG(u.signIn(!0))}),n.YNc(1,N,3,3,"ng-container",10),n.YNc(2,B,2,0,"ng-container",10),n.qZA()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",!t.loading),n.xp6(1),n.Q6J("ngIf",t.loading)}}function O(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",36),n.NdJ("click",function(){n.CHM(t);const u=n.oxw();return n.KtG(u.authService.goToVerifyCodeTg())}),n.TgZ(1,"span",37),n._uU(2),n.ALo(3,"translate"),n.qZA()()}2&e&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 Telegram")))}function q(e,i){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0421\u041c\u0421")))}function U(e,i){1&e&&(n.ynx(0),n._UZ(1,"ion-spinner"),n.BQk())}function w(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",34),n.NdJ("click",function(){n.CHM(t);const u=n.oxw();return n.KtG(u.signIn(!1))}),n.YNc(1,q,3,3,"ng-container",10),n.YNc(2,U,2,0,"ng-container",10),n.qZA()}if(2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",!t.loading),n.xp6(1),n.Q6J("ngIf",t.loading)}}function D(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"ion-item",44),n.NdJ("click",function(){const s=n.CHM(t).$implicit,p=n.oxw(3);return n.KtG(p.selectCode(s))}),n.TgZ(1,"ion-avatar",45)(2,"div",46),n._uU(3),n.qZA()(),n.TgZ(4,"ion-label")(5,"h2"),n._uU(6),n.qZA(),n.TgZ(7,"p"),n._uU(8),n.TgZ(9,"b"),n._uU(10),n.qZA()()()()}if(2&e){const t=i.$implicit;n.xp6(3),n.hij(" ",t.flag," "),n.xp6(3),n.Oqu(t.name),n.xp6(2),n.hij("",t.code," "),n.xp6(2),n.Oqu(t.dial_code)}}function G(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"ion-content",40)(1,"ion-searchbar",41),n.NdJ("ionInput",function(u){n.CHM(t);const s=n.oxw(2);return n.KtG(s.findPhoneCode(u))})("click",function(){n.CHM(t),n.oxw();const u=n.MAs(1);return n.KtG(u.setCurrentBreakpoint(.75))}),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"ion-list",42),n.YNc(4,D,11,4,"ion-item",43),n.qZA()()}if(2&e){const t=n.oxw(2);n.xp6(1),n.s9C("placeholder",n.lcZ(2,2,"\u041f\u043e\u0438\u0441\u043a \u043a\u043e\u0434\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")),n.xp6(3),n.Q6J("ngForOf",t.phonescodes)}}const S=function(){return[0,.5,1]};function H(e,i){1&e&&(n.TgZ(0,"ion-modal",38,39),n.YNc(2,G,5,4,"ng-template"),n.qZA()),2&e&&n.Q6J("swipeToClose",!1)("initialBreakpoint",.5)("breakpoints",n.DdM(3,S))}const K=[{path:"",component:(()=>{class e{constructor(t,o,u,s,p,$,R,V){this.router=t,this.app=o,this.modalCtrl=u,this.httpClient=s,this.authService=p,this.navCtrl=$,this.alertController=R,this.platform=V,this.isTelegram=!1,this.phone="",this.code="",this.timer=59,this.codeon=!1,this.error=!1,this.policy=!1,this.offer=!1,this.prefix="+998",this.flag="\u{1f1fa}\u{1f1ff}",this.mask=" (00) 000-00-00",this.country_code="UZ",this.phone_length=0,this.searchinput="",this.loading=!1,this.authService.locationIsAvailable(),console.log(this.authService.locationIsAvailable()),this.platform.ready().then(()=>{this.setAutocompleteAttribute()})}ngOnInit(){this.getJSONFromLocal().subscribe(t=>{this.phonescodesOriginal=t,this.phonescodes=this.phonescodesOriginal},t=>console.error(`Failed because: ${t}`))}setAutocompleteAttribute(){if(this.passInput){const t=this.passInput.getInputElement();t&&t.then(o=>{o.autocomplete="one-time-code"})}}getJSONFromLocal(){return this.httpClient.get("./assets/json/phone.json")}back(){this.router.navigate(["selectlanguage"])}recoverLogin(){return(0,g.mG)(this,void 0,void 0,function*(){yield this.router.navigate(["recoverlogin"])})}signIn(t){return(0,g.mG)(this,void 0,void 0,function*(){this.isTelegram=t,this.loading=!0,this.phone.length<this.mask.length?(yield this.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),this.loading=!1):this.offer?this.policy?yield this.authService.loginUser(this.prefix+""+this.phone,this.country_code,t).toPromise().then(o=>(0,g.mG)(this,void 0,void 0,function*(){o.status&&(this.codeon=!0,this.loading=!1,this.timer=59,setInterval(()=>{this.timer>0&&(this.timer=this.timer-1)},1e3)),this.error=!1})).catch(o=>(0,g.mG)(this,void 0,void 0,function*(){this.loading=!1,this.error=!0})):(yield this.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0443 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438"),this.loading=!1):(yield this.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430","\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u0443\u044e \u043e\u0444\u0435\u0440\u0442\u0443"),this.loading=!1)})}verifyCode(){return(0,g.mG)(this,void 0,void 0,function*(){this.loading=!0,yield this.authService.verifyCode(this.prefix+""+this.phone,this.code).toPromise().then(t=>(0,g.mG)(this,void 0,void 0,function*(){t.status?(yield this.authService.setJwt(t.token),yield this.app.checkSession(),this.loading=!1):(yield this.authService.alert("\u041e\u0448\u0438\u0431\u043a\u0430",t.text),this.loading=!1),this.error=!1})).catch(t=>(0,g.mG)(this,void 0,void 0,function*(){this.loading=!1,this.error=!0}))})}findPhoneCode(t){this.searchinput=t.target.value,this.phonescodes=this.phonescodesOriginal.filter(o=>o.name?o.name.toLowerCase().includes(this.searchinput.toLowerCase())||!o.code?o.code:o.code.toLowerCase().includes(this.searchinput.toLowerCase())||!o.dial_code?o.dial_code:o.dial_code.toLowerCase().includes(this.searchinput.toLowerCase()):o.name)}selectCode(t){this.modalCtrl.dismiss(),this.prefix=t.dial_code,this.flag=t.flag,this.mask=t.mask?t.mask:" (00) 000-00-00",this.country_code=t.code}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(_.F0),n.Y36(m.y),n.Y36(a.IN),n.Y36(x.eN),n.Y36(b.$),n.Y36(a.SH),n.Y36(a.Br),n.Y36(a.t4))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],viewQuery:function(t,o){if(1&t&&n.Gf(T,5),2&t){let u;n.iGM(u=n.CRH())&&(o.passInput=u.first)}},decls:24,vars:14,consts:[[1,"ion-no-padding","ion-no-margin"],[1,"wrapper-fluid"],[1,"logo-wrap"],[1,"top-back",3,"click"],["src","assets/img/arrow-left.svg","alt",""],["src","/assets/logos/tirgo-logo.png","alt",""],[1,"body-wrap","form-block"],["action","",1,"autorize"],["for","phone","style","position: relative;top: 20px",4,"ngIf"],["class","input-mode-tel",4,"ngIf"],[4,"ngIf"],[1,"bottom-wrap","autorize-btns"],["class","classic-btn",3,"disabled","click",4,"ngIf"],["class","classic-btn",3,"click",4,"ngIf"],["class","support-btn","style","background-color: #00ABF1FF",3,"click",4,"ngIf"],["class","reg-btn ","style","background-color: #00ABF1FF;margin: 20px 0;display: flex;align-items: center;justify-content: center;gap:10px",3,"click",4,"ngIf"],[1,"support-btn",3,"click"],["src","assets/img/support.svg","alt",""],["trigger","open-modal-select-code","class","modal-phone-select-code",3,"swipeToClose","initialBreakpoint","breakpoints",4,"ngIf"],["for","phone",2,"position","relative","top","20px"],[1,"input-mode-tel"],["id","open-modal-select-code"],["type","tel","inputmode","tel","id","phone","name","phone",1,"phone-input",3,"placeholder","mask","ngModel","ngModelChange"],[1,"input-mode-code"],["for","pass",2,"font-size","17px !important"],["id","pass","autocomplete","one-time-code","type","tel","name","pass",3,"ngModel","ngModelChange"],["passInput",""],["class","resend-sms",4,"ngIf"],[1,"resend-sms"],["lines","none",1,"agroinput","ion-no-margin","ion-no-padding","accept-text"],["slot","start",3,"ngModel","ngModelChange"],["href","https://tirgo.uz/privacy-policy/"],["href","https://tirgo.uz/public_offer.html"],[1,"classic-btn",3,"disabled","click"],[1,"classic-btn",3,"click"],[1,"support-btn",2,"background-color","#00ABF1FF",3,"click"],[1,"reg-btn",2,"background-color","#00ABF1FF","margin","20px 0","display","flex","align-items","center","justify-content","center","gap","10px",3,"click"],[2,"width","none !important"],["trigger","open-modal-select-code",1,"modal-phone-select-code",3,"swipeToClose","initialBreakpoint","breakpoints"],["modal",""],[1,"phone-code-select"],["slot","fixed",3,"placeholder","ionInput","click"],[1,"list-phone-code"],["lines","none",3,"click",4,"ngFor","ngForOf"],["lines","none",3,"click"],["slot","start"],[1,"flag-phone"]],template:function(t,o){1&t&&(n.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"button",3),n.NdJ("click",function(){return o.back()}),n._UZ(4,"img",4),n.qZA(),n._UZ(5,"img",5),n.qZA(),n.TgZ(6,"div",6)(7,"form",7),n.YNc(8,Z,3,3,"label",8),n.YNc(9,C,4,5,"span",9),n.YNc(10,k,8,7,"ng-container",10),n.qZA()(),n.YNc(11,A,19,14,"ng-container",10),n.TgZ(12,"div",11),n.YNc(13,y,3,3,"button",12),n.YNc(14,J,3,2,"button",13),n.YNc(15,Q,3,2,"button",13),n.YNc(16,Y,3,2,"button",14),n.YNc(17,O,4,3,"button",15),n.YNc(18,w,3,2,"button",13),n.TgZ(19,"button",16),n.NdJ("click",function(){return o.authService.goToSupport()}),n._UZ(20,"img",17),n._uU(21),n.ALo(22,"translate"),n.qZA()()(),n.YNc(23,H,3,4,"ion-modal",18),n.qZA()),2&t&&(n.xp6(8),n.Q6J("ngIf",!o.codeon),n.xp6(1),n.Q6J("ngIf",!o.codeon),n.xp6(1),n.Q6J("ngIf",o.codeon),n.xp6(1),n.Q6J("ngIf",!o.codeon),n.xp6(2),n.Q6J("ngIf",!o.codeon),n.xp6(1),n.Q6J("ngIf",!o.codeon),n.xp6(1),n.Q6J("ngIf",o.codeon),n.xp6(1),n.Q6J("ngIf",o.codeon&&0===o.timer&&o.isTelegram),n.xp6(1),n.Q6J("ngIf",o.codeon&&o.isTelegram),n.xp6(1),n.Q6J("ngIf",o.codeon&&0===o.timer&&!o.isTelegram),n.xp6(3),n.Oqu(n.lcZ(22,12,"\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u0432 \u0441\u043b\u0443\u0436\u0431\u0443 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438")),n.xp6(2),n.Q6J("ngIf",!o.codeon))},dependencies:[r.sg,r.O5,l._Y,l.Fj,l.JJ,l.JL,l.On,l.F,a.BJ,a.nz,a.W2,a.Ie,a.Q$,a.q_,a.VI,a.PQ,a.ki,a.w,a.j9,f.hx,h.X$],styles:[".agroinput[_ngcontent-%COMP%]{padding-left:20px}.agroinput[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff}.agroinput[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.agroinput[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--background: #262434}.resend-sms[_ngcontent-%COMP%]{display:block;color:#fff;margin-top:10px}.agroinput[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--background: white!important;--background-checked: #ed901e}"]}),e})()}];let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[_.Bz.forChild(K),_.Bz]}),e})(),z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[r.ez,l.u5,a.Pc,j,f.Kf,h.aw]}),e})()}}]);